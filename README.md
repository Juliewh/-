# Лабораторная работа: Основы работы с командой grep в Linux

Следующие разделы представлены как пример, в отчет их не надо включать.
1. Начало работы;
2. Поиск строк по ключевым словам;
3. Использование флагов для игнорирования регистра, подсчета строк и выделения совпадений;
4. Применение фильтрации, регулярных выражений и контекста поиска.

Раздел "Задание 1" нужно включить в отчет.

## 1. Начало работы

1. Создайте текстовый файл ```data.txt``` со следующим содержимым:

```
echo -e "apple is a fruit.\napple pie is delicious.\nbanana is yellow.\nI like orange juice.\nblueberries are tasty.\napple is green sometimes.\norange is also a fruit.\napple orange banana." > data.txt
```

2. Убедитесь, что файл создан и содержит текст. Для этого выполните:

```
cat data.txt
```

## 2. Поиск строк по ключевым словам

1. Для нахождения строк, содержащих слово "apple" выполните команду:

```
grep "apple" data.txt
```

## 3. Использование флагов для игнорирования регистра, подсчета строк и выделения совпадений

1. Для игнорирования регистра символов, используйте ```grep -i```, найдите строки, содержащие слово "Apple", независимо от регистра букв:

```
grep -i "apple" data.txt
```
(вывод останется тем же, т.к. все слова в файле в нижнем регистре)

2. Узнайте, сколько строк содержат слово "apple"  с помощью команды:

```
grep -c "apple' data.txt
```

3. Выделите слово "apple" цветом в строках, где оно встречается:

```
grep --color "apple" data.txt
```

## 4. Применение фильтрации, регулярных выражений и контекста поиска

1. Выведите строки, которые не содержат слово "apple"

```
grep -v "apple" data.txt
```

2. Найдите строки, где встречаются слова, заканчивающиеся на ```"e"``` (например, ```apple```, ```orange```):

```
grep -E "\b\w*e\b" data.txt
```

3. Найдите строки, где встречаются оба слова: ```apple``` и ```orange```:

```
grep "apple" data.txt | grep "orange"
```

4. Добавьте контекст к строкам, выведите строки с ```apple``` вместе с одной строкой до и одной строкой после совпадения:

```
grep -C 1 "apple" data.txt
```

## Задание 1

1. Создайте файл ```logfile.txt``` с данными, содержащими логи системы, используяю следующую команду:

```
echo -e "2024-01-01 10:00:00 INFO: System boot completed.\n2024-01-01 10:15:32 WARNING: Disk space low on /dev/sda1.\n2024-01-01 11:00:45 ERROR: Failed to start service X.\n2024-01-02 09:12:11 INFO: User login detected.\n2024-01-02 09:15:50 INFO: User logout detected.\n2024-01-02 09:30:00 ERROR: Network timeout occurred.\n2024-01-03 12:00:00 INFO: Backup started.\n2024-01-03 12:15:00 WARNING: High CPU usage detected.\n2024-01-04 08:00:00 INFO: Scheduled task executed.\n2024-01-04 08:30:00 ERROR: Failed to execute task Y.\n2024-01-05 18:00:00 INFO: Shutdown initiated." > logfile.txt
```

2. Используя команду ```grep``` выполните следующие задачи:
   a) Общий поиск:
     - Найдите все строки, содержащие слово ```ERROR```;
     - Выведите строки, в которых есть либо ```WARNING```, либо ```ERROR```;
     - Найдите строки, содержащие ключевое слово ```INFO```, но которые не содержат ```User```;
   б) Фильтрация по дате и времени:
     - Найдите все события, произошедшие ```1 января 2024 года```;
     - Найдите строки, в которых время события находится между ```09:00:00``` и ```10:00:00``` (включительно);
     - Выведите все ошибки ```(ERROR)``` за ```4 января 2024 года```;
   в) Шаблоны с регулярными выражениями:
     - Найдите строки, где упоминается путь к устройствам, например, ```/dev/sda1```;
     - Выведите строки, где упоминается конкретный модуль или задача ```(service X, task Y)```, независимо от регистра;
   г) Подсчет:
     - Подсчитайте общее количество строк с уровнем важности ```ERROR```, ```WARNING```, и ```INFO``` (для каждого уровня отдельно);
     - Подсчитайте количество строк, где упоминается слово ```detected```;
   д) Расширенный вывод:
     - Отобразите строки с ```ERROR``` и выделите совпадения цветом;
     - Добавьте контекст: выведите строки с ```ERROR```, включая 2 строки до и 1 строку после каждой найденной строки;
   е) Сложный запрос:
     - Найдите строки, где указаны как ```ERROR```, так и время между ```09:00:00``` и ```12:00:00```.
  
   ## Ресурсы

   1. [Официальное руководство по grep](https://www.gnu.org/s/grep/manual/grep.html)
   2. [Руководство по grep на Linux man-pages](https://man7.org/linux/man-pages/man1/grep.1.html)
   3. [Регулярные выражения Bash: полный гайд](https://timeweb.cloud/tutorials/linux/regulyarnye-vyrazheniya-bash-gajd)
   4. [Команда grep и регулярные выражения в Linux](https://codechick.io/tutorials/unix-linux/unix-linux-regular-expressions-grep)
   5. [Команда grep в Linux - поиск строк и шаблонов в файлах](https://selectel.ru/blog/tutorials/grep-command-in-linux/)
   6. [Регулярные выражения и команда grep](https://hackware.ru/?p=3238)
